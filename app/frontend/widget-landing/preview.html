<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Widget Preview - See Your AI Chat in Action</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="preview-styles.css">
</head>
<body>
    <!-- Header -->
    <header class="preview-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <rect width="32" height="32" rx="8" fill="#4F46E5"/>
                        <path d="M8 12C8 10.8954 8.89543 10 10 10H22C23.1046 10 24 10.8954 24 12V18C24 19.1046 23.1046 20 22 20H16L12 24V20H10C8.89543 20 8 19.1046 8 18V12Z" fill="white"/>
                    </svg>
                    <span>ChatWidget Preview</span>
                </div>
                <div class="header-actions">
                    <button class="btn-secondary" onclick="toggleDevice()">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M7 3H13C14.1046 3 15 3.89543 15 5V15C15 16.1046 14.1046 17 13 17H7C5.89543 17 5 16.1046 5 15V5C5 3.89543 5.89543 3 7 3Z" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span id="deviceToggleText">Mobile</span>
                    </button>
                    <button class="btn-primary" onclick="getEmbedCode()">
                        Get Embed Code
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Preview Section -->
    <section class="preview-section">
        <div class="preview-container">
            <!-- Info Panel -->
            <div class="info-panel">
                <div class="info-card">
                    <h3>Your AI Widget is Ready! ðŸŽ‰</h3>
                    <p>Here's how your chat widget looks on your website. Try clicking on it to see it in action!</p>

                    <div class="info-details">
                        <div class="info-item">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2Z" stroke="#4F46E5" stroke-width="2"/>
                                <path d="M10 6V10L13 13" stroke="#4F46E5" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            <div>
                                <div class="info-label">Status</div>
                                <div class="info-value">Active & Online</div>
                            </div>
                        </div>

                        <div class="info-item">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M3 8L10 2L17 8V16C17 17.1046 16.1046 18 15 18H5C3.89543 18 3 17.1046 3 16V8Z" stroke="#4F46E5" stroke-width="2"/>
                            </svg>
                            <div>
                                <div class="info-label">Website</div>
                                <div class="info-value" id="websiteUrl">Loading...</div>
                            </div>
                        </div>

                        <div class="info-item">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M3 8L8.89 13.26C9.568 13.842 10.432 13.842 11.11 13.26L17 8M5 4H15C16.1046 4 17 4.89543 17 6V14C17 15.1046 16.1046 16 15 16H5C3.89543 16 3 15.1046 3 14V6C3 4.89543 3.89543 4 5 4Z" stroke="#4F46E5" stroke-width="2"/>
                            </svg>
                            <div>
                                <div class="info-label">Account</div>
                                <div class="info-value" id="userEmail">sumansaurabh@hith.chat</div>
                            </div>
                        </div>
                    </div>

                    <div class="next-steps">
                        <h4>Next Steps</h4>
                        <ul>
                            <li>
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <circle cx="10" cy="10" r="8" stroke="#10B981" stroke-width="2"/>
                                    <path d="M7 10L9 12L13 8" stroke="#10B981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Copy the embed code
                            </li>
                            <li>
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <circle cx="10" cy="10" r="8" stroke="#10B981" stroke-width="2"/>
                                    <path d="M7 10L9 12L13 8" stroke="#10B981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Paste it before the &lt;/body&gt; tag
                            </li>
                            <li>
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <circle cx="10" cy="10" r="8" stroke="#10B981" stroke-width="2"/>
                                    <path d="M7 10L9 12L13 8" stroke="#10B981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Deploy and start chatting!
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Preview Frame -->
            <div class="preview-frame" id="previewFrame">
                <div class="device-frame desktop" id="deviceFrame">
                    <div class="frame-header">
                        <div class="frame-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="frame-url" id="frameUrl">https://example.com</div>
                    </div>
                    <div class="frame-content">
                        <!-- Loading State -->
                        <div class="iframe-loading" id="iframeLoading">
                            <div class="spinner"></div>
                            <p>Loading your website...</p>
                        </div>

                        <!-- Error State -->
                        <div class="iframe-error" id="iframeError" style="display: none;">
                            <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                                <circle cx="32" cy="32" r="32" fill="#FEE2E2"/>
                                <path d="M32 20V36M32 44V48" stroke="#DC2626" stroke-width="4" stroke-linecap="round"/>
                            </svg>
                            <h3>Can't load website in preview</h3>
                            <p>This website blocks embedding in iframes for security reasons.</p>
                            <p class="error-note">Don't worry! Your widget will work perfectly when installed on your actual website.</p>
                            <button class="btn-primary" onclick="showFallbackPreview()">Show Demo Instead</button>
                        </div>

                        <!-- Iframe -->
                        <iframe id="websiteIframe" style="display: none;"></iframe>

                        <!-- Fallback Preview -->
                        <div class="fallback-preview" id="fallbackPreview" style="display: none;">
                            <div class="fallback-content">
                                <h2>Your Website</h2>
                                <p>This is a demo of how the chat widget will appear on your website.</p>
                                <div class="demo-sections">
                                    <div class="demo-section">
                                        <h3>Welcome to Our Site</h3>
                                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                                    </div>
                                    <div class="demo-section">
                                        <h3>Our Services</h3>
                                        <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Widget will be injected here -->
                <div id="widgetContainer"></div>
            </div>
        </div>
    </section>

    <!-- Embed Code Modal -->
    <div class="modal" id="embedModal" style="display: none;">
        <div class="modal-overlay" onclick="closeEmbedModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Embed Code</h3>
                <button class="modal-close" onclick="closeEmbedModal()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p>Copy this code and paste it before the closing &lt;/body&gt; tag of your website:</p>
                <div class="code-block">
                    <code id="embedCodeText"></code>
                </div>
                <button class="btn-primary" onclick="copyEmbedCode()">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M8 4H6C4.89543 4 4 4.89543 4 6V14C4 15.1046 4.89543 16 6 16H14C15.1046 16 16 15.1046 16 14V12M10 10L16 4M16 4H12M16 4V8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Copy Code
                </button>
            </div>
        </div>
    </div>

    <script src="preview-script.js"></script>
</body>
</html>
